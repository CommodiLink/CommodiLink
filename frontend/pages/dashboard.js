import {useEffect,useState} from 'react';import axios from 'axios';export default function Dashboard(){const [companies,setCompanies]=useState([]);const [name,setName]=useState('');const [type,setType]=useState('broker');const [country,setCountry]=useState('');useEffect(()=>{const t=localStorage.getItem('token');if(!t)return(window.location.href='/login');axios.get(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/companies`,{headers:{Authorization:`Bearer ${t}`}}).then(r=>setCompanies(r.data));},[]);const create=async(e)=>{e.preventDefault();const t=localStorage.getItem('token');const r=await axios.post(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/companies`,{name,type,country},{headers:{Authorization:`Bearer ${t}`}});setCompanies([r.data,...companies]);setName('');setType('broker');setCountry('');};return(<div className='container py-12'><div className='flex items-center justify-between mb-6'><h1 className='text-3xl font-bold'>Directory</h1><div className='flex gap-2'><a href='/kyc' className='btn btn-primary'>KYC</a><a href='/deal-rooms' className='btn btn-primary'>Deal Rooms</a></div></div><div className='card mb-8'><div className='card-body'><h3 className='font-semibold mb-3'>Add Company</h3><form onSubmit={create} className='grid md:grid-cols-4 gap-3'><input className='border p-2 rounded-lg' placeholder='Company Name' value={name} onChange={e=>setName(e.target.value)}/><select className='border p-2 rounded-lg' value={type} onChange={e=>setType(e.target.value)}><option value='refinery'>Refinery</option><option value='mine'>Mine</option><option value='broker'>Broker</option><option value='shipper'>Shipper</option><option value='buyer'>Buyer</option><option value='seller'>Seller</option></select><input className='border p-2 rounded-lg' placeholder='Country' value={country} onChange={e=>setCountry(e.target.value)}/><button className='btn btn-primary'>Add</button></form></div></div><div className='grid md:grid-cols-2 gap-4'>{companies.map(c=>(<div key={c.id} className='card'><div className='card-body'><div className='flex items-center justify-between'><div><div className='text-lg font-semibold'>{c.name}</div><div className='text-sm text-gray-600'>{c.type} â€¢ {c.country||'N/A'}</div></div><span className='badge'>{c.verified?'Verified':'Unverified'}</span></div></div></div>))}</div></div>)}
